<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="_analyzeTracking">

    <insert id="trackingReferrer">
        INSERT INTO OP_ANALYZE_REFERRER (
                       ANLZ_DOMAIN_NM,
                       ANLZ_SESSION_ID,
                       ANLZ_TIME,
                       ANLZ_REFERRER, 
                       ANLZ_SEARCH_NAME,
                       ANLZ_SEARCH_DOMAIN,
                       ANLZ_SEARCH_WORD,
                       ANLZ_SEARCH_ENGINE_YN,
                       ANLZ_STATISTIC_FLAG
                       ) 
                  VALUES (
                        #{anlzDomainNm},
                        #{anlzSessionId},
                        SYSDATETIME,
                        SUBSTR(#{anlzReferer}, 1, 4000),
                        #{anlzSearchName},
                        #{anlzSearchDomain},
                        #{anlzSearchWord},
                        #{anlzSearchEngineYn},
                        'A'
                        )
    </insert>
    
    <insert id="tracking" parameterType="trackingVO">
        INSERT INTO OP_PGE_ANALS_LOG (
                       ANLZ_DOMAIN_NM,
                       ANLZ_SESSION_ID, 
                       ANLZ_IP, 
                       ANLZ_TIME, 
                       ANLZ_URL, 
                       ANLZ_REFERER,
                       ANLZ_USER_ID,
                       ANLZ_PAGE_TITLE,  
                       ANLZ_FIRST_VISIT_YN,
                       ANLZ_SEARCH_ENGINE_YN,
                       ANLZ_MOBILE_YN,
                       ANLZ_PAGE_VIEW_CNT,
                       ANLZ_FIRST_VISIT_HOUR_YN,
                       ANLZ_FIRST_VISIT_DATE_YN, 
                       ANLZ_FIRST_VISIT_WEEK_YN,
                       ANLZ_FIRST_VISIT_MONTH_YN,
                       ANLZ_REVISIT_PERIOD,
                       ANLZ_STATISTIC_FLAG
                       )
                  VALUES (
                        #{anlzDomainNm}, 
                        #{anlzSessionId}, 
                        #{anlzIp}, 
                        SYSDATETIME,
                        SUBSTR(#{anlzUrl}, 1, 4000),
                        SUBSTR(#{anlzReferer}, 1, 4000),
                        #{anlzUserId},
                        #{anlzPageTitle},
                        #{anlzFirstVisitYn},
                        #{anlzSearchEngineYn},
                        #{anlzMobileYn},
                        #{anlzPageViewCnt},
                        #{anlzFirstVisitHourYn},
                        #{anlzFirstVisitDateYn},
                        #{anlzFirstVisitWeekYn},
                        #{anlzFirstVisitMonthYn},
                        #{anlzReVisitPeriod},
                        'A'
                        )
    </insert>

    <insert id="trackingClientPlatform" parameterType="trackingVO">
        INSERT INTO OP_ANALYZE_CLIENT_PLATFORM (
                       ANLZ_DOMAIN_NM,
                       ANLZ_SESSION_ID,
                       ANLZ_TIME,
                       ANLZ_USER_AGENT, 
                       ANLZ_OS_NAME,
                       ANLZ_BROWSER_NAME,
                       ANLZ_BROWSER_VERSION, 
                       ANLZ_SCREEN_WIDTH,
                       ANLZ_SCREEN_HEIGHT,
                       ANLZ_SCREEN_COLOR_DEPTH,
                       ANLZ_STATISTIC_FLAG
                       ) 
                  VALUES (
                        #{anlzDomainNm}, 
                        #{anlzSessionId},
                        SYSDATETIME,
                        #{anlzUserAgent},
                        #{anlzOSName},
                        #{anlzBrowserName},
                        #{anlzBrowserVersion},
                        #{anlzScreenWidth},
                        #{anlzScreenHeight},
                        #{anlzScreenColorDepth},
                        'A'
                        )
    </insert>
</mapper>